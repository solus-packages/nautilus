From d3a3bfa52499a606d9a36bc71be9f0e1f6a86ac2 Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@streambits.io>
Date: Sat, 27 Mar 2021 13:49:40 +0200
Subject: [PATCH 4/5] Revert "properties-window: Make bottom corners rounded"

This reverts commit 8826f21f2bc717f727ac221414f96d1453235db2.
---
 src/nautilus-properties-window.c              |  4 ++--
 src/nautilus-properties-window.h              |  3 +--
 .../ui/nautilus-properties-window.ui          | 19 +++++++++----------
 3 files changed, 12 insertions(+), 14 deletions(-)

diff --git a/src/nautilus-properties-window.c b/src/nautilus-properties-window.c
index ec20ca0cb..d21d6a56c 100644
--- a/src/nautilus-properties-window.c
+++ b/src/nautilus-properties-window.c
@@ -74,7 +74,7 @@ typedef struct
 
 struct _NautilusPropertiesWindow
 {
-    HdyWindow parent_instance;
+    GtkWindow parent_instance;
 
     GList *original_files;
     GList *target_files;
@@ -315,7 +315,7 @@ static void name_field_activate (GtkWidget *name_field,
                                  gpointer   user_data);
 static void setup_pie_widget (NautilusPropertiesWindow *self);
 
-G_DEFINE_TYPE (NautilusPropertiesWindow, nautilus_properties_window, HDY_TYPE_WINDOW);
+G_DEFINE_TYPE (NautilusPropertiesWindow, nautilus_properties_window, GTK_TYPE_WINDOW);
 
 static gboolean
 is_multi_file_window (NautilusPropertiesWindow *self)
diff --git a/src/nautilus-properties-window.h b/src/nautilus-properties-window.h
index 84f8166a9..c1b44a103 100644
--- a/src/nautilus-properties-window.h
+++ b/src/nautilus-properties-window.h
@@ -24,13 +24,12 @@
 #pragma once
 
 #include <gtk/gtk.h>
-#include <libhandy-1/handy.h>
 
 #define NAUTILUS_TYPE_PROPERTIES_WINDOW (nautilus_properties_window_get_type ())
 
 G_DECLARE_FINAL_TYPE (NautilusPropertiesWindow, nautilus_properties_window,
                       NAUTILUS, PROPERTIES_WINDOW,
-                      HdyWindow)
+                      GtkWindow)
 
 typedef void (* NautilusPropertiesWindowCallback) (gpointer    callback_data);
 
diff --git a/src/resources/ui/nautilus-properties-window.ui b/src/resources/ui/nautilus-properties-window.ui
index 4ffc5932e..23916f5a2 100644
--- a/src/resources/ui/nautilus-properties-window.ui
+++ b/src/resources/ui/nautilus-properties-window.ui
@@ -2,7 +2,7 @@
 <!-- Generated with glade 3.36.0 -->
 <interface>
   <requires lib="gtk+" version="3.20"/>
-  <template class="NautilusPropertiesWindow" parent="HdyWindow">
+  <template class="NautilusPropertiesWindow" parent="GtkWindow">
     <property name="can_focus">False</property>
     <property name="modal">True</property>
     <property name="type_hint">dialog</property>
@@ -10,15 +10,6 @@
       <object class="GtkBox" id="content_box">
         <property name="visible">True</property>
         <property name="can_focus">False</property>
-        <property name="orientation">vertical</property>
-        <child>
-          <object class="HdyHeaderBar">
-            <property name="visible">True</property>
-            <property name="can_focus">False</property>
-            <property name="show_close_button">True</property>
-            <property name="title" bind-source="NautilusPropertiesWindow" bind-property="title" bind-flags="sync-create"/>
-          </object>
-        </child>
         <child>
           <object class="GtkNotebook" id="notebook">
             <property name="visible">True</property>
@@ -1399,11 +1390,19 @@
               <placeholder/>
             </child>
           </object>
+          <packing>
+            <property name="expand">True</property>
+            <property name="fill">True</property>
+            <property name="position">0</property>
+          </packing>
         </child>
         <style>
           <class name="view"/>
         </style>
       </object>
     </child>
+    <child type="titlebar">
+      <placeholder/>
+    </child>
   </template>
 </interface>
-- 
2.30.2

